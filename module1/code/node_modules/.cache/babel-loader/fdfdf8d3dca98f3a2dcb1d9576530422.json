{"remainingRequest":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/babel-loader/lib/index.js!/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/linxi/work/workspace/javascript/fe-course/module1/code/src/views/Clipboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/src/views/Clipboard.vue","mtime":1625774162043},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/cache-loader/dist/cjs.js","mtime":1590562704711},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/babel-loader/lib/index.js","mtime":1609310991365},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/cache-loader/dist/cjs.js","mtime":1590562704711},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/vue-loader/lib/index.js","mtime":1621413896821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJLZXlib3JhZCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvcHlDb250ZW50OiAiIiwKICAgICAgcGFzdGVDb250ZW50OiAiIiwKICAgICAgcGFzdGVJbWFnZTogIiIKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnRvRml4ZWQoMS4wMDUsIDIpOwoKICAgIGRvY3VtZW50LmJvZHkub25jb3B5ID0gZnVuY3Rpb24gKGV2dCkgewogICAgICB2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIGV2dC5jbGlwYm9hcmREYXRhLnNldERhdGEoInRleHQvcGxhaW4iLCAi6K+l5paH5qGj5LiN5YWB6K645aSN5Yi25Ymq6LS05pON5L2c77yM6LCi6LCi6YWN5ZCIISIgKyBzZWxlY3Rpb24udG9TdHJpbmcoKSk7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfTsKCiAgICBkb2N1bWVudC5ib2R5Lm9ucGFzdGUgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIF90aGlzLnBhc3RlQ29udGVudCA9IGV2dC5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKTsKCiAgICAgIGlmIChldnQuY2xpcGJvYXJkRGF0YS5pdGVtcykgewogICAgICAgIGV2dC5jbGlwYm9hcmREYXRhLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLnR5cGUuaW5jbHVkZXMoImltYWdlIikpIHsKICAgICAgICAgICAgdmFyIGZpbGUgPSBpdGVtLmdldEFzRmlsZSgpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAvLyBldmVudC50YXJnZXQucmVzdWx05bCx5piv5Zu+54mH55qEQmFzZTY05Zyw5Z2A5ZWmCiAgICAgICAgICAgICAgX3RoaXMuJHJlZnMuaW1nLnN0eWxlLndpZHRoID0gZmlsZS53aWR0aCArICJweCI7CiAgICAgICAgICAgICAgX3RoaXMuJHJlZnMuaW1nLnN0eWxlLmhlaWdodCA9IGZpbGUuaGVpZ2h0ICsgInB4IjsKICAgICAgICAgICAgICBfdGhpcy5wYXN0ZUltYWdlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnBhc3RlSW1hZ2UpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdG9GaXhlZDogZnVuY3Rpb24gdG9GaXhlZChudW0sIHMpIHsKICAgICAgdmFyIHRpbWVzID0gTWF0aC5wb3coMTAsIHMpOwogICAgICB2YXIgZGVzID0gbnVtICogdGltZXMgKyAwLjU7CiAgICAgIGRlcyA9IHBhcnNlSW50KGRlcywgMTApIC8gdGltZXM7CiAgICAgIHJldHVybiBkZXMgKyAiIjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Clipboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAkBA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA,SAAA,OAAA,CAAA,KAAA,EAAA,CAAA;;AAEA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,GAAA,UAAA,GAAA,EAAA;AACA,UAAA,SAAA,GAAA,QAAA,CAAA,YAAA,EAAA;AACA,MAAA,GAAA,CAAA,aAAA,CAAA,OAAA,CACA,YADA,EAEA,uBAAA,SAAA,CAAA,QAAA,EAFA;AAIA,MAAA,GAAA,CAAA,cAAA;AACA,KAPA;;AASA,IAAA,QAAA,CAAA,IAAA,CAAA,OAAA,GAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,aAAA,CAAA,OAAA,CAAA,YAAA,CAAA;;AAEA,UAAA,GAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACA,QAAA,GAAA,CAAA,aAAA,CAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EAAA;AACA,gBAAA,IAAA,GAAA,IAAA,CAAA,SAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AAEA,gBAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AACA,YAAA,MAAA,CAAA,MAAA,GAAA,UAAA,CAAA,EAAA;AACA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,GAAA,IAAA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,KAAA,CAAA,MAAA,GAAA,IAAA,CAAA,MAAA,GAAA,IAAA;AACA,cAAA,KAAA,CAAA,UAAA,GAAA,CAAA,CAAA,MAAA,CAAA,MAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,UAAA;AACA,aANA;;AAOA,YAAA,MAAA,CAAA,OAAA,GAAA,UAAA,GAAA,EAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,aAFA;;AAGA,YAAA,MAAA,CAAA,aAAA,CAAA,IAAA;AACA;AACA,SAlBA;AAmBA;AACA,KAxBA;AAyBA,GA9CA;AAgDA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA,CADA,EACA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,GAAA,CAAA,EAAA,EAAA,CAAA,CAAA;AACA,UAAA,GAAA,GAAA,GAAA,GAAA,KAAA,GAAA,GAAA;AACA,MAAA,GAAA,GAAA,QAAA,CAAA,GAAA,EAAA,EAAA,CAAA,GAAA,KAAA;AACA,aAAA,GAAA,GAAA,EAAA;AACA;AANA;AAhDA,CAAA","sourcesContent":["<template>\n  <div class=\"page\">\n    Clipboard\n    <hr />\n    <section>复制内容:{{ pasteContent }}<br /></section>\n    <section>\n      粘贴内容:\n      <textarea> </textarea>\n    </section>\n\n    <section>\n      粘贴图片:\n      <img ref=\"img\" :src=\"pasteImage\" />\n    </section>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nexport default {\n  name: \"Keyborad\",\n  data() {\n    return {\n      copyContent: \"\",\n      pasteContent: \"\",\n      pasteImage: \"\",\n    };\n  },\n  mounted() {\n    this.toFixed(1.005, 2);\n\n    document.body.oncopy = (evt) => {\n      const selection = document.getSelection();\n      evt.clipboardData.setData(\n        \"text/plain\",\n        \"该文档不允许复制剪贴操作，谢谢配合!\" + selection.toString()\n      );\n      evt.preventDefault();\n    };\n\n    document.body.onpaste = (evt) => {\n      this.pasteContent = evt.clipboardData.getData(\"text/plain\");\n\n      if (evt.clipboardData.items) {\n        evt.clipboardData.items.forEach((item) => {\n          if (item.type.includes(\"image\")) {\n            let file = item.getAsFile();\n            console.log(file);\n\n            var reader = new FileReader();\n            reader.onload = (e) => {\n              // event.target.result就是图片的Base64地址啦\n              this.$refs.img.style.width = file.width + \"px\";\n              this.$refs.img.style.height = file.height + \"px\";\n              this.pasteImage = e.target.result;\n              console.log(this.pasteImage);\n            };\n            reader.onerror = (err) => {\n              console.log(err);\n            };\n            reader.readAsDataURL(file);\n          }\n        });\n      }\n    };\n  },\n\n  methods: {\n    toFixed(num, s) {\n      var times = Math.pow(10, s);\n      var des = num * times + 0.5;\n      des = parseInt(des, 10) / times;\n      return des + \"\";\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.page {\n  text-align: left;\n  section {\n    margin: 20px;\n  }\n  img {\n    border: 1px solid #ccc;\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}