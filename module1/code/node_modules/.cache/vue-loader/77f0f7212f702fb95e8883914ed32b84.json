{"remainingRequest":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/linxi/work/workspace/javascript/fe-course/module1/code/src/views/Clipboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/src/views/Clipboard.vue","mtime":1625774162043},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/cache-loader/dist/cjs.js","mtime":1590562704711},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/babel-loader/lib/index.js","mtime":1609310991365},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/cache-loader/dist/cjs.js","mtime":1590562704711},{"path":"/Users/linxi/work/workspace/javascript/fe-course/module1/code/node_modules/vue-loader/lib/index.js","mtime":1621413896821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJLZXlib3JhZCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvcHlDb250ZW50OiAiIiwKICAgICAgcGFzdGVDb250ZW50OiAiIiwKICAgICAgcGFzdGVJbWFnZTogIiIsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudG9GaXhlZCgxLjAwNSwgMik7CgogICAgZG9jdW1lbnQuYm9keS5vbmNvcHkgPSAoZXZ0KSA9PiB7CiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpOwogICAgICBldnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKAogICAgICAgICJ0ZXh0L3BsYWluIiwKICAgICAgICAi6K+l5paH5qGj5LiN5YWB6K645aSN5Yi25Ymq6LS05pON5L2c77yM6LCi6LCi6YWN5ZCIISIgKyBzZWxlY3Rpb24udG9TdHJpbmcoKQogICAgICApOwogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CgogICAgZG9jdW1lbnQuYm9keS5vbnBhc3RlID0gKGV2dCkgPT4gewogICAgICB0aGlzLnBhc3RlQ29udGVudCA9IGV2dC5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKTsKCiAgICAgIGlmIChldnQuY2xpcGJvYXJkRGF0YS5pdGVtcykgewogICAgICAgIGV2dC5jbGlwYm9hcmREYXRhLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgIGlmIChpdGVtLnR5cGUuaW5jbHVkZXMoImltYWdlIikpIHsKICAgICAgICAgICAgbGV0IGZpbGUgPSBpdGVtLmdldEFzRmlsZSgpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsKCiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKICAgICAgICAgICAgICAvLyBldmVudC50YXJnZXQucmVzdWx05bCx5piv5Zu+54mH55qEQmFzZTY05Zyw5Z2A5ZWmCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5pbWcuc3R5bGUud2lkdGggPSBmaWxlLndpZHRoICsgInB4IjsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmltZy5zdHlsZS5oZWlnaHQgPSBmaWxlLmhlaWdodCArICJweCI7CiAgICAgICAgICAgICAgdGhpcy5wYXN0ZUltYWdlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGFzdGVJbWFnZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycikgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHRvRml4ZWQobnVtLCBzKSB7CiAgICAgIHZhciB0aW1lcyA9IE1hdGgucG93KDEwLCBzKTsKICAgICAgdmFyIGRlcyA9IG51bSAqIHRpbWVzICsgMC41OwogICAgICBkZXMgPSBwYXJzZUludChkZXMsIDEwKSAvIHRpbWVzOwogICAgICByZXR1cm4gZGVzICsgIiI7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Clipboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Clipboard.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"page\">\n    Clipboard\n    <hr />\n    <section>复制内容:{{ pasteContent }}<br /></section>\n    <section>\n      粘贴内容:\n      <textarea> </textarea>\n    </section>\n\n    <section>\n      粘贴图片:\n      <img ref=\"img\" :src=\"pasteImage\" />\n    </section>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nexport default {\n  name: \"Keyborad\",\n  data() {\n    return {\n      copyContent: \"\",\n      pasteContent: \"\",\n      pasteImage: \"\",\n    };\n  },\n  mounted() {\n    this.toFixed(1.005, 2);\n\n    document.body.oncopy = (evt) => {\n      const selection = document.getSelection();\n      evt.clipboardData.setData(\n        \"text/plain\",\n        \"该文档不允许复制剪贴操作，谢谢配合!\" + selection.toString()\n      );\n      evt.preventDefault();\n    };\n\n    document.body.onpaste = (evt) => {\n      this.pasteContent = evt.clipboardData.getData(\"text/plain\");\n\n      if (evt.clipboardData.items) {\n        evt.clipboardData.items.forEach((item) => {\n          if (item.type.includes(\"image\")) {\n            let file = item.getAsFile();\n            console.log(file);\n\n            var reader = new FileReader();\n            reader.onload = (e) => {\n              // event.target.result就是图片的Base64地址啦\n              this.$refs.img.style.width = file.width + \"px\";\n              this.$refs.img.style.height = file.height + \"px\";\n              this.pasteImage = e.target.result;\n              console.log(this.pasteImage);\n            };\n            reader.onerror = (err) => {\n              console.log(err);\n            };\n            reader.readAsDataURL(file);\n          }\n        });\n      }\n    };\n  },\n\n  methods: {\n    toFixed(num, s) {\n      var times = Math.pow(10, s);\n      var des = num * times + 0.5;\n      des = parseInt(des, 10) / times;\n      return des + \"\";\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.page {\n  text-align: left;\n  section {\n    margin: 20px;\n  }\n  img {\n    border: 1px solid #ccc;\n  }\n}\n</style>\n"]}]}